<!DOCTYPE html>
<html>
<head>
  <title>Restaurant Menu</title>
</head>
<body>

<h1>Welcum to Our Restaurant</h1>

<p id="tableInfo"></p>

<button onclick="order()">Order Chicken Chop</button>

<!-- Firebase v10 Modular SDK -->
<script type="module">
  // Import the functions we need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyD9x_Fvec4nkEHWVJ6D02xDvWqwmCXk81k",
    authDomain: "qr-menu-fe159.firebaseapp.com",
    projectId: "qr-menu-fe159",
    storageBucket: "qr-menu-fe159.appspot.com",
    messagingSenderId: "105707127728",
    appId: "1:105707127728:web:65dee4362f74b67f35cc75"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Get table number from URL
  const params = new URLSearchParams(window.location.search);
  const table = params.get("table");

  if (!table) {
    document.body.innerHTML = "Please scan the QR code on your table.";
  } else {
    document.getElementById("tableInfo").innerText =
      "You are ordering from Table " + table;
  }

  // Order function
  async function order() {
    try {
      await addDoc(collection(db, "orders"), {
        table: table,
        item: "Chicken Chop",
        status: "new",
        time: serverTimestamp()
      });
      alert("Order sent to kitchen!");
    } catch (error) {
      alert("Error sending order: " + error);
    }
  }
</script>

</body>
</html>