<!DOCTYPE html>
<html>
<head>
  <title>Restaurant Menu</title>
</head>
<body>

<h1>Welcome to Our Restaurant</h1>
<p id="tableInfo"></p>

<button onclick="order()">Order Chicken Chop</button>

<!-- Firebase COMPAT SDK (works on ALL devices) -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyD9x_Fvec4nkEHWVJ6D02xDvWJ6D02xDvWJ6D02xDvW",
    authDomain: "qr-menu-fe159.firebaseapp.com",
    projectId: "qr-menu-fe159",
    storageBucket: "qr-menu-fe159.appspot.com",
    messagingSenderId: "105707127728",
    appId: "1:105707127728:web:65dee4362f74b67f35cc75"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // Get table number from URL
  const params = new URLSearchParams(window.location.search);
  const table = params.get("table");

  if (!table) {
    document.body.innerHTML = "Please scan the QR code on your table.";
  } else {
    document.getElementById("tableInfo").innerText =
      "You are ordering from Table " + table;
  }

  // Send order
  function order() {
    db.collection("orders").add({
      table: table,
      item: "Chicken Chop",
      status: "new",
      time: firebase.firestore.FieldValue.serverTimestamp()
    })
    .then(() => {
      alert("Order sent to kitchen!");
    })
    .catch((error) => {
      alert("Error: " + error.message);
    });
  }
</script>

</body>
</html>