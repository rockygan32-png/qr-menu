<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
  <title>QR Menu</title>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f9f9f9;
    }

    /* ===== CATEGORY BAR ===== */
    .category-bar {
      display: flex;
      overflow-x: auto;
      background: #111;
      padding: 10px;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .category-bar button {
      flex: none;
      background: transparent;
      border: none;
      color: white;
      font-size: 16px;
      margin-right: 20px;
      cursor: pointer;
      white-space: nowrap;
    }

    .category-bar button:hover {
      color: gold;
    }

    /* ===== SECTION ===== */
    .section {
      padding: 20px;
    }

    .section h2 {
      margin-bottom: 10px;
      border-bottom: 2px solid #ddd;
      padding-bottom: 5px;
    }

    /* ===== FOOD CARD ===== */
    .food-card {
      background: white;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .food-title {
      font-weight: bold;
      font-size: 18px;
    }

    .food-code {
      color: #888;
      font-size: 14px;
    }

    .food-price {
      margin-top: 5px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <p id="tableInfo" style="padding:10px;font-weight:bold;"></p>
<p id="orderType" style="padding:10px;font-weight:bold;"></p>
<h1>Welcome to Our Restaurant</h1>
<p id="tableInfo"></p>

<button onclick="order()">Order Chicken Chop</button>

<!-- Firebase COMPAT SDK (works on ALL devices) -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyD9x_Fvec4nkEHWVJ6D02xDvWJ6D02xDvWJ6D02xDvW",
    authDomain: "qr-menu-fe159.firebaseapp.com",
    projectId: "qr-menu-fe159",
    storageBucket: "qr-menu-fe159.appspot.com",
    messagingSenderId: "105707127728",
    appId: "1:105707127728:web:65dee4362f74b67f35cc75"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // Get table number from URL
  const params = new URLSearchParams(window.location.search);
  const table = params.get("table");

  if (!table) {
    document.body.innerHTML = "Please scan the QR code on your table.";
  } else {
    document.getElementById("tableInfo").innerText =
      "You are ordering from Table " + table;
  }

  // Send order
  function order() {
    db.collection("orders").add({
      table: table,
      item: "Chicken Chop",
      status: "new",
      time: firebase.firestore.FieldValue.serverTimestamp()
    })
    .then(() => {
      alert("Order sent to kitchen!");
    })
    .catch((error) => {
      alert("Error: " + error.message);
    });
  }
  
  const type = localStorage.getItem("orderType");

if (type === "dinein") {
  document.getElementById("orderType").innerText = "üçΩÔ∏è Dine In";
} else if (type === "takeaway") {
  document.getElementById("orderType").innerText = "ü•° Take Away";
}

</script>

<!-- ===== CATEGORY BAR ===== -->
<div class="category-bar">
  <button onclick="scrollToSection('burger')">üçî Burgers</button>
  <button onclick="scrollToSection('pasta')">üçù Pasta</button>
  <button onclick="scrollToSection('drink')">ü•§ Beverages</button>
</div>

<!-- ===== BURGER SECTION ===== -->
<div class="section" id="burger">
  <h2>Burgers</h2>

  <div class="food-card">
    <div class="food-title">Chicken Burger <span class="food-code">(A01)</span></div>
    <div class="food-price">RM 15</div>
  </div>

  <div class="food-card">
    <div class="food-title">Beef Burger <span class="food-code">(A02)</span></div>
    <div class="food-price">RM 18</div>
  </div>
</div>

<!-- ===== PASTA SECTION ===== -->
<div class="section" id="pasta">
  <h2>Pasta</h2>

  <div class="food-card">
    <div class="food-title">Carbonara <span class="food-code">(B01)</span></div>
    <div class="food-price">RM 20</div>
  </div>

  <div class="food-card">
    <div class="food-title">Aglio Olio <span class="food-code">(B02)</span></div>
    <div class="food-price">RM 18</div>
  </div>
</div>

<!-- ===== DRINK SECTION ===== -->
<div class="section" id="drink">
  <h2>Beverages</h2>

  <div class="food-card">
    <div class="food-title">Coke <span class="food-code">(C01)</span></div>
    <div class="food-price">RM 5</div>
  </div>

  <div class="food-card">
    <div class="food-title">Lemon Tea <span class="food-code">(C02)</span></div>
    <div class="food-price">RM 6</div>
  </div>
</div>

<script>
  function scrollToSection(id) {
    document.getElementById(id).scrollIntoView({
      behavior: "smooth"
    });
  }
</script>
</body>
<script>
  const params = new URLSearchParams(window.location.search);
  const table = params.get("table");
  const type = params.get("type");

  let text = "";

  if (type === "dinein" && table) {
    text = "üçΩÔ∏è Dine In ‚Äî Table " + table;
  } else if (type === "takeaway") {
    text = "ü•° Take Away";
  } else {
    text = "Welcome";
  }

  document.getElementById("tableInfo").innerText = text;
</script>
</html>